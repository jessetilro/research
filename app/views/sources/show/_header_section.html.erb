<div class="panel panel-primary">
  <div class="panel-heading">
    <div class="page-header">
      <% if @source.starred_by? current_user %>
        <%= link_to raw("#{glyphicon :star}"), star_url(@source.star_by(current_user)), method: :delete, class: 'btn btn-success pull-right btn-lg' %>
      <% else %>
        <%= form_for Star.new, class: 'form-inline' do |f| %>
          <%= f.hidden_field :source_id, value: @source.id %>
          <%= f.hidden_field :user_id, value: current_user.id %>
          <%= content_tag :button, raw("#{glyphicon 'star-empty'}"), class: 'btn btn-default pull-right btn-lg' %>
        <% end %>
      <% end %>

      <h1><%= content_tag :h3, @source.title %>
      <small>Source <%= @source.id %>, added by <%= "#{@source.user.full_name} #{time_ago_in_words(@source.created_at)}" %> ago.</small></h1>
    </div>
  </div>
  <div class="panel-body">

    <%= link_to raw("Edit #{glyphicon :pencil}"), edit_source_path(@source), class: 'btn btn-primary' %>

    <% if @source.document.present? %>
      <%= link_to raw("Download PDF #{glyphicon 'download-alt'}"),
            url_for(format: :pdf, download: true),
            class: 'btn btn-info' %>
    <% end %>

    <% if @source.url.present? %>
      <%= link_to raw("Original Webpage #{glyphicon 'new-window'}"),
            @source.url,
            target: '_blank',
            class: 'btn btn-info' %>
    <% end %>

    <%= content_tag :button, raw("Export Source #{glyphicon :export}"),
          class: 'btn btn-default',
          data: { toggle: 'modal', target: '#exportModal' } %>

    <%= link_to raw("Delete Source #{glyphicon :trash}"), source_path(@source),
          method: :delete,
          data: { confirm: 'Are you sure?' },
          class: 'btn btn-warning' %>

  </div>
</div>
